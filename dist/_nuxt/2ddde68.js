(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{878:function(t,e,n){"use strict";n.r(e);var o=n(59),r=n(19),c=(n(60),n(7),n(29),n(54),n(27),n(8),n(33),{mounted:function(){this.$refs.calendar.scrollToTime("08:00"),this.ObtenerReservaciones()},layout:"empty",computed:{today:function(){this.$moment()}},data:function(){return{focus:"",tipos:{seleccionado:"month",listado:{month:"Mes",week:"Semana",day:"Día"},iconos:{month:"fa fa-calendar",week:"fa fa-calendar-week",day:"fa fa-calendar-day"}},names:["Meeting","Holiday","PTO","Travel","Event","Birthday","Conference","Party"],reservaciones:[],negocios:[]}},methods:{ObtenerReservaciones:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={usuarioId:JSON.parse(localStorage.getItem("usuario")).id},e.next=3,t.$api.post("/reservacion/usuario",n).then((function(data){data.forEach((function(t){t.start=t.fechaInicio?t.fechaInicio.split("T")[0]+" "+t.hora:"2021-10-14 07:30",t.end=t.fechaFinal?t.fechaFinal.split("T")[0]+" "+t.hora:"2021-10-15 07:30"})),t.reservaciones=[].concat(Object(o.a)(t.reservaciones),Object(o.a)(data)),t.ObtenerNegocios()}));case 3:case"end":return e.stop()}}),e)})))()},ObtenerNegocios:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.get("/negocios",{}).then((function(data){t.reservaciones.forEach((function(e){Object.keys(data).forEach((function(n){data[n].forEach((function(n){e.negocioId===n.id&&(e.name="Reservación en "+n.nombre+" ("+("p"===e.estado?"Pendiente":"Confirmada")+")",t.$forceUpdate())}))}))}))}));case 2:case"end":return e.stop()}}),e)})))()},hoy:function(){this.focus=""},previo:function(){this.$refs.calendar.prev()},siguiente:function(){this.$refs.calendar.next()},viewDay:function(t){var e=t.date;this.focus=e,this.tipos.seleccionado="day"},updateRange:function(t){for(var e=t.start,n=t.end,o=[],r=new Date("".concat(e.date,"T00:00:00")),c=new Date("".concat(n.date,"T23:59:59")),l=(c.getTime()-r.getTime())/864e5,v=this.rnd(l,l+20),i=0;i<v;i++){var f=0===this.rnd(0,3),d=this.rnd(r.getTime(),c.getTime()),h=new Date(d-d%9e5),m=9e5*this.rnd(2,f?288:8),_=new Date(h.getTime()+m);o.push({name:this.names[this.rnd(0,this.names.length-1)],start:h,end:_})}this.events=o},rnd:function(a,b){return Math.floor((b-a+1)*Math.random())+a}}}),l=n(24),v=n(50),f=n.n(v),d=n(750),h=n(264),m=n(159),_=n(857),y=n(733),w=n(754),k=n(198),V=n(204),T=n(261),x=n(160),$=n(23),O=n(270),C=n(738),R=n(51),I=n(739),D=n(84),S=n(207),j=n(740),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-app-bar",{attrs:{fixed:"",app:"",flat:"",color:"primary",outlined:""}},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:"secondary",dark:"",icon:""},on:{click:function(e){t.$router.push({path:t.$nuxt.context.from.path?t.$nuxt.context.from.path:"/"})}}},"v-btn",r,!1),o),[n("v-icon",{attrs:{color:"secondary"}},[t._v(" fa fa-arrow-left ")])],1)]}}])},[t._v(" "),n("span",[t._v("Regresar")])]),t._v(" "),n("v-avatar",{attrs:{size:"60"}},[n("v-img",{staticClass:"mr-2",attrs:{src:"/logo-no-texto.png",width:"100",height:"100",contain:""}})],1),t._v(" "),n("v-toolbar-title",{domProps:{textContent:t._s("Historial de Reservaciones")}})],1),t._v(" "),n("v-row",[n("v-col",[n("v-sheet",{attrs:{height:"64"}},[n("v-toolbar",{attrs:{flat:""}},[n("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:t.hoy}},[n("v-icon",{attrs:{left:""}},[t._v("fa fa-calendar-day")]),t._v("\n            Hoy\n          ")],1),t._v(" "),n("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:t.previo}},[n("v-icon",{attrs:{small:""}},[t._v("\n              fa fa-chevron-left\n            ")])],1),t._v(" "),n("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:t.siguiente}},[n("v-icon",{attrs:{small:""}},[t._v("\n              fa fa-chevron-right\n            ")])],1),t._v(" "),t.$refs.calendar?n("v-toolbar-title",[t._v("\n            "+t._s(t.$refs.calendar.title.charAt(0).toUpperCase()+t.$refs.calendar.title.substring(1))+"\n          ")]):t._e(),t._v(" "),n("v-spacer"),t._v(" "),n("v-menu",{attrs:{bottom:"",right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({attrs:{outlined:"",color:"grey darken-2"}},"v-btn",r,!1),o),[n("v-icon",{attrs:{left:""}},[t._v("\n                  "+t._s(t.tipos.iconos[t.tipos.seleccionado])+"\n                ")]),t._v(" "),n("span",[t._v(t._s(t.tipos.listado[t.tipos.seleccionado]))]),t._v(" "),n("v-icon",{attrs:{right:""}},[t._v("\n                  mdi-menu-down\n                ")])],1)]}}])},[t._v(" "),n("v-list",[n("v-list-item",{on:{click:function(e){t.tipos.seleccionado="day"}}},[n("v-list-item-content",[n("v-list-item-title",[t._v("Día")])],1)],1),t._v(" "),n("v-list-item",{on:{click:function(e){t.tipos.seleccionado="week"}}},[n("v-list-item-title",[t._v("Semana")])],1),t._v(" "),n("v-list-item",{on:{click:function(e){t.tipos.seleccionado="month"}}},[n("v-list-item-title",[t._v("Mes")])],1)],1)],1)],1)],1),t._v(" "),n("v-sheet",[n("v-calendar",{ref:"calendar",staticClass:"text-wrap",attrs:{type:t.tipos.seleccionado,now:t.today,events:t.reservaciones,color:"secondary","event-color":"secondary"},on:{"click:more":t.viewDay,"click:date":t.viewDay},model:{value:t.focus,callback:function(e){t.focus=e},expression:"focus"}})],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;f()(component,{VAppBar:d.a,VAvatar:h.a,VBtn:m.a,VCalendar:_.a,VCol:y.a,VContainer:w.a,VIcon:k.a,VImg:V.a,VList:T.a,VListItem:x.a,VListItemContent:$.a,VListItemTitle:$.c,VMenu:O.a,VRow:C.a,VSheet:R.a,VSpacer:I.a,VToolbar:D.a,VToolbarTitle:S.a,VTooltip:j.a})}}]);